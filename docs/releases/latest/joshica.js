(()=>{"use strict";class e{constructor(e){this.value="",this.list=[],this.element=e,this.value=this.element.getAttribute("ux")||"",this.list=this.value.split(" ").filter(e=>""!==e.trim())}add(e){this.contains(e)||(this.list.push(e),this.value=this.list.join(" "),this.element.setAttribute("ux",this.value),this.element.ux.refresh())}remove(e){var t;this.contains(e)&&(this.list=this.list.filter(t=>t!==e),this.value=this.list.join(" "),this.element.setAttribute("ux",this.value),(null===(t=this.element.ux)||void 0===t?void 0:t.experiences[e])&&delete this.element.ux.experiences[e],this.element.ux.refresh())}contains(e){return this.list.includes(e)}}function t(e,t){var i;if(!(null===(i=e.ux)||void 0===i?void 0:i.experiences[t])&&r.get().experienceFactories[t]){const i=(0,r.get().experienceFactories[t])(e);return(null==i?void 0:i.onInit)&&i.onInit(),e.ux.experiences[t]=i,i}}class i{constructor(t){this.element=t,this.isRefreshInProgress=!1,this.experiences={},this.element.uxid||(this.element.uxid="_ux_"+Math.random().toString(36).slice(2,7),this.element.setAttribute(this.element.uxid,"")),this.element.uxList||(this.element.uxList=new e(this.element))}refresh(){if(this.isRefreshInProgress)return;this.isRefreshInProgress=!0;const e=this.element.uxList.value;this.element.uxList.list.forEach(e=>{let i=this.experiences[e];i||(i=t(this.element,e)),(null==i?void 0:i.onRefresh)&&i.onRefresh()}),this.isRefreshInProgress=!1,this.children().forEach(e=>{e.ux.refresh()}),e!==this.element.uxList.value&&this.refresh()}parent(){return r.get().getHtmlExperienceElementParent(this.element)}children(){return r.get().getHtmlExperienceElementChildren(this.element)}}class r{constructor(){this.experienceFactories={}}static get(){return r.instance||(r.instance=new r),r.instance}registerExperience(e,t){this.experienceFactories[e]=t}getHtmlExperienceElement(e){return e.ux||(e.ux=new i(e)),e}refresh(){document.querySelectorAll("[ux]").forEach(e=>{const t=this.getHtmlExperienceElement(e);t.ux.parent()||t.ux.refresh()})}getHtmlExperienceElementParent(e){var t=e.parentElement;if(t)return t&&t.getAttribute("ux")?this.getHtmlExperienceElement(t):this.getHtmlExperienceElementParent(t)}getHtmlExperienceElementChildren(e){const t=e.querySelectorAll("[ux]"),i=[];return t.forEach(t=>{this.getHtmlExperienceElementParent(t)===e&&i.push(this.getHtmlExperienceElement(t))}),i}}class n{constructor(e){this.element=e}refresh(){this.element.ux.refresh()}requireUx(e){this.element.uxList.add(e)}removeUx(e){this.element.uxList.remove(e)}}const s={registerExperience:function(e,t){r.get().registerExperience(e,t)},refresh:function(){r.get().refresh()},querySelector:function(e){const t=document.querySelector(e+"[ux]");if(t){if(t.ux)return t;{const e=r.get().getHtmlExperienceElement(t);return e.ux.refresh(),e}}},querySelectorAll:function(e){return Array.from(document.querySelectorAll(e)).filter(e=>void 0!==e.ux)},getUx:function(e,i){if(null==e?void 0:e.ux)return e.ux.experiences[i]?e.ux.experiences[i]:t(e,i)}};window.ux=s;(()=>{let e=[(t={id:"ariaLabelCheckBehavior"},e=>{r.get().registerExperience(t.id,i=>(t.imports&&t.imports.forEach(e=>{i.uxList.add(e)}),new e(i)))})];var t;let i,s,l=[],c=n;var a,o,u;s=class extends c{onRefresh(){this.isAriaLabelPresent()||console.warn("A11y warning: HtmlExperienceElement["+this.element.uxid+"] is missing an aria-label or an aria-labelledby attribute.")}isAriaLabelPresent(){return this.element.hasAttribute("aria-label")||this.element.hasAttribute("aria-labelledby")}},a=s,"symbol"==typeof(o="AriaLabelCheckBehavior")&&(o=o.description?"[".concat(o.description,"]"):""),Object.defineProperty(a,"name",{configurable:!0,value:u?"".concat(u," ",o):o}),(()=>{var t;const r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(t=c[Symbol.metadata])&&void 0!==t?t:null):void 0;(function(e,t,i,r,n,s){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var c,a=r.kind,o="getter"===a?"get":"setter"===a?"set":"value",u=!t&&e?r.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),m=!1,x=i.length-1;x>=0;x--){var f={};for(var d in r)f[d]="access"===d?{}:r[d];for(var d in r.access)f.access[d]=r.access[d];f.addInitializer=function(e){if(m)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(e||null))};var p=(0,i[x])("accessor"===a?{get:h.get,set:h.set}:h[o],f);if("accessor"===a){if(void 0===p)continue;if(null===p||"object"!=typeof p)throw new TypeError("Object expected");(c=l(p.get))&&(h.get=c),(c=l(p.set))&&(h.set=c),(c=l(p.init))&&n.unshift(c)}else(c=l(p))&&("field"===a?n.unshift(c):h[o]=c)}u&&Object.defineProperty(u,r.name,h),m=!0})(null,i={value:s},e,{kind:"class",name:s.name,metadata:r},null,l),s=i.value,r&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r}),function(e,t,i){for(var r=arguments.length>2,n=0;n<t.length;n++)i=r?t[n].call(e,i):t[n].call(e)}(s,l)})()})()})();// @copyright thebytebar.// @copyright thebytebar.// @copyright thebytebar.// @copyright thebytebar.// @copyright thebytebar.// @copyright thebytebar.// @copyright thebytebar.// @copyright thebytebar.// @copyright thebytebar.// @copyright thebytebar.// @copyright thebytebar.// @copyright thebytebar.// @copyright thebytebar.// @copyright thebytebar.// @copyright thebytebar.
